# 第四章：启动

## 启动

Shell 被执行时会识别以下参数确定 Shell 从哪里读取指令：

`-c`
:   取第一个参数作为执行的命令，而非从脚本或标准输入读取命令。若其后给了任何参数，第一个被赋值 `$0`，而非作为位置参数使用。

`-i`
:   强制交互 Shell，仍可以指定执行的脚本。

`-s`
:   强制 Shell 从标准输入读取命令。若未给 `-s` 参数且传入一个参数，第一参数作为要执行的脚本的路径。

若选项处理后仍有剩余参数，且 `-c` 和 `-s` 都未指定，第一参数作为包含 Shell 命令的脚本文件名。如设置选项 `PATH_SCRIPT`，且文件名不含目录路径（即名字中没有 `/`），先按当前目录后按变量 `PATH` 中指定的命令路径搜索脚本。如未设该选项或名字中包含 `/` 它会被直接使用。

在按上述内容处理前一两个参数后，余下的参数即作为位置参数。

更多常见于启动与内建命令 `set` 的选项，详见 [-> 选项](16-options.md)

可向 Shell 传递长选项 `--emulate` 及（以一个单独的词形式）尾随其后的一个模拟模式。模拟模式是 `emulate` 中描述的模式，详见 [-> Shell 内建命令](17-builtins.md)。`--emulate` 选项必须置于其他（可能被覆盖的）选项之前，所以可用于改变要求的模拟模式。注意相较于 Shell 内的 `emulate` 命令，使用此选项后会为平滑模拟做出额外步骤：例如 Shell 内像 `path` 这样与 POSIX 用法相违背的变量不会被定义。

选项可以用 `-o` 选项按名字指定。`-o` 像一个单字符选项，但取下一个字符串作为选项名。例如：

```zsh
zsh -x -o shwordsplit scr
```

运行脚本 `scr`，通过相应字符 `-x` 设置 `XTRACE` 选项并通过名字设置 `SH_WORD_SPLIT` 选项。可使用 `+o` 而非 `-o` _关闭_ 选项。`-o` 可以与前置的单字符选项堆叠在一起，所以举例 `-xo shwordsplit` 或 `-xoshwordsplit` 等效于 `-x -o shwordsplit`。

选项也可以通过 GNU 长选项风格 `--option-name` 按名字指定。这么做时，选项名中允许有 `-`：它们被转换成 `_`，因此被忽略。所以举例，`zsh --sh-word-split` 执行 Zsh 并启用 `SH_WORD_SPLIT` 选项。像其他选项语法一样，可以通过把首个 `-` 换成 `+` 来关闭选项；因此 `+-sh-word-split` 等效于 `--no-sh-word-split`。不像其他选项格式，GNU 式长选项不可以和其他任何选项堆在一起。因此举例 `-x-shwordsplit` 是个错误，而非像 `-x --shwordsplit` 那样处理。

特殊的 GNU 式选项 `--version` 也会被处理；它会向标准输出输出 Shell 版本信息，然后成功退出。`--help` 也会被处理；它会向标准输出输出当执行 Shell 时可用的选项。然后成功退出。

-- To be continued --
